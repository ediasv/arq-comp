set shell := ["fish", "-c"]

clean:
    rm -f work-obj93.cf

analyze: clean
    ghdl -a ./*.vhd

all: clean
    #!/usr/bin/env fish

    for file in src/*.vhd
        ghdl -a $file
    end

    for file in test/*_tb.vhd
        set basename (basename $file .vhd)
        ghdl -e $basename
        ghdl -r $basename --vcd=gtk_output/$basename.vcd
        echo "Test successfully created for $basename"
    end
